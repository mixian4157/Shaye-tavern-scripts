# 莎夜界面诊断步骤

## 步骤 1: 检查构建文件

确保已构建前端界面：

```bash
pnpm build
```

检查文件是否存在：
- `dist/莎夜/index.html` 应该存在

## 步骤 2: 启动本地服务器

你需要启动一个本地 HTTP 服务器。选择以下方式之一：

### 方式 A: VS Code Live Server
1. 安装 "Live Server" 扩展
2. 右键点击 `dist/莎夜/index.html`
3. 选择 "Open with Live Server"
4. 记下显示的端口（通常是 5500）

### 方式 B: Python 服务器
```bash
cd dist
python -m http.server 5500
```

### 方式 C: Node.js http-server
```bash
npx http-server dist -p 5500
```

## 步骤 3: 验证服务器

在浏览器中直接访问：
```
http://localhost:5500/dist/莎夜/index.html
```

如果能看到界面，说明服务器正常。

## 步骤 4: 检查酒馆助手配置

1. 打开酒馆助手设置
2. 找到 "实时修改" 功能
3. 确认已导入 `界面-莎夜.json`
4. 确认规则已启用（`disabled: false`）

## 步骤 5: 检查浏览器控制台

1. 在酒馆网页中按 F12 打开开发者工具
2. 切换到 Console 标签
3. 发送一条消息
4. 查看是否有以下日志：
   - "开始加载莎夜界面..."
   - "莎夜界面加载成功" 或错误信息

## 步骤 6: 检查网络请求

1. 在开发者工具中切换到 Network 标签
2. 发送一条消息
3. 查找对 `localhost:5500/dist/莎夜/index.html` 的请求
4. 检查请求状态：
   - 200: 成功
   - 404: 文件不存在
   - ERR_CONNECTION_REFUSED: 服务器未启动

## 常见问题

### 问题 1: ERR_CONNECTION_REFUSED
**原因**: 本地服务器未启动
**解决**: 按照步骤 2 启动服务器

### 问题 2: 404 Not Found
**原因**: 文件路径不正确
**解决**: 检查 `dist/莎夜/index.html` 是否存在

### 问题 3: 界面没有显示
**原因**: 正则表达式未匹配
**解决**:
- 检查 `findRegex` 是否正确
- 尝试修改为更具体的正则，如 `"显示健康|健康状态"`

### 问题 4: 界面显示但样式异常
**原因**: 资源加载失败
**解决**: 检查控制台中的资源加载错误

## 调试技巧

如果使用更新后的配置文件（带错误处理），界面加载失败时会显示红色错误信息，帮助你快速定位问题。

